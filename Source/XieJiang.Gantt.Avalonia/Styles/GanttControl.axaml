<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ava="clr-namespace:XieJiang.CommonModule.Ava"
    xmlns:gantt="https://github.com/xiejiang2014/XieJiang.Gantt.Avalonia"
    xmlns:controls="clr-namespace:XieJiang.Gantt.Avalonia.Controls"
    x:DataType="gantt:GanttModel">

    <Design.PreviewWith>
        <StackPanel Spacing="10">
            <StackPanel Background="{DynamicResource SystemRegionBrush}">
                <gantt:GanttControl
                    Width="400"
                    Height="400"
                    RowHeight="100"
                    StartDate="2024-1-1"
                    TaskBarHeight="80" />
            </StackPanel>
        </StackPanel>
    </Design.PreviewWith>

    <ControlTheme
        x:Key="{x:Type gantt:GanttControl}"
        TargetType="gantt:GanttControl">
        <Setter Property="Template">
            <ControlTemplate>
                <Grid RowDefinitions="Auto,*,Auto">
                    <controls:GanttHeader
                        x:Name="PART_GanttHeader"
                        HorizontalAlignment="Left">
                        <controls:GanttHeader.RenderTransform>
                            <TranslateTransform X="{Binding Path=#HScrollBar.Value, Converter={x:Static gantt:DoubleNegationConverter.Default}}" />
                        </controls:GanttHeader.RenderTransform>
                    </controls:GanttHeader>

                    <controls:GanttBodyBackground
                        x:Name="PART_GanttBodyBackground"
                        Grid.Row="1"
                        Grid.RowSpan="2"
                        Width="{Binding #PART_GanttHeader.Width}"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Stretch">
                        <controls:GanttBodyBackground.RenderTransform>
                            <TranslateTransform X="{Binding Path=#HScrollBar.Value, Converter={x:Static gantt:DoubleNegationConverter.Default}}" />
                        </controls:GanttBodyBackground.RenderTransform>
                    </controls:GanttBodyBackground>

                    <Canvas
                        x:Name="PART_CanvasBody"
                        Grid.Row="1"
                        Grid.RowSpan="2"
                        Width="{Binding #PART_GanttHeader.Width}"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Stretch"
                        Background="Transparent">
                        <Canvas.RenderTransform>
                            <TranslateTransform X="{Binding Path=#HScrollBar.Value, Converter={x:Static gantt:DoubleNegationConverter.Default}}" />
                        </Canvas.RenderTransform>


                    </Canvas>

                    <ScrollBar
                        x:Name="HScrollBar"
                        Grid.Row="2"
                        VerticalAlignment="Bottom"
                        AllowAutoHide="False"
                        Orientation="Horizontal">
                        <ScrollBar.Maximum>
                            <MultiBinding Converter="{x:Static ava:DoubleSubtractiveConverter.Default}">
                                <Binding Path="#PART_GanttHeader.Width" />
                                <Binding Path="#HScrollBar.Bounds.Width" />
                            </MultiBinding>
                        </ScrollBar.Maximum>
                    </ScrollBar>

                    <ScrollBar
                        Grid.Row="1"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Stretch" />
                </Grid>
            </ControlTemplate>
        </Setter>
    </ControlTheme>
</ResourceDictionary>
